\documentclass[11pt]{article}

\usepackage{tikz}
\usepackage{fp}
\usepackage{pgfplots,pgfplotstable}

\usepgfplotslibrary{external} 
%\tikzexternalize

\begin{document}
\pgfplotsset{max space between ticks=50pt}
\tikzset{every mark/.append style={scale=.5}}

\newcommand{\clipplot}[1]{
	\begin{tikzpicture}
	\begin{axis}[
		scaled ticks=false,
		height=7cm,
		width=.7\textwidth,
		ymax=1.1,
		ymin=-.1,
		legend style={at={(1.1, .5)},
		anchor=west},
		reverse legend,
		]

		\pgfplotsinvokeforeach{0,0.4,0.6,1}{
			\FPround{\res}{##1}{1}
			\addplot+[error bars/.cd, y dir=both, y explicit]
		    		table[x=iteration,y=success,y error=error]
		    		{#1/comp_\res/results_clip.csv};
			\addlegendentry{wrong \res}
		}

	\end{axis}
	\end{tikzpicture}
}
\newcommand{\avrgplot}[2]{
	\begin{tikzpicture}
	\begin{axis}[
		scaled ticks=false,
		height=7cm,
		width=.7\textwidth,
		ymax=1.1,
		ymin=-.1,
		legend style={at={(1.1, .5)},
		anchor=west},
		reverse legend,
		]
	
		\fill[red!50,opacity=.5]
			(axis cs:0,\pgfkeysvalueof{/pgfplots/ymin})
			rectangle
			(axis cs:#2,\pgfkeysvalueof{/pgfplots/ymax});	

		\pgfplotsinvokeforeach{0,0.4,0.6,1}{
			\FPround{\res}{##1}{1}
			\addplot+[error bars/.cd, y dir=both, y explicit]
		    		table[x=iteration,y=success,y error=error]
		    		{#1/comp_\res/results_avrg.csv};
			\addlegendentry{wrong \res}
		}

	\end{axis}
	\end{tikzpicture}
}

\newcommand{\strucplot}[4]{
	\pgfplotstableread{#1/#2/run#3_structure.csv}{\readtable}
	\begin{tikzpicture}
		\begin{axis}[
			scaled ticks=false,
			height=10cm,
			width=10cm,
			const plot,
			stack plots=y,
			area style,
			legend style={at={(1.1, .5)},
			anchor=west},
			reverse legend,
			]

		\fill[red!50,opacity=.5]
			(axis cs:0,\pgfkeysvalueof{/pgfplots/ymin})
			rectangle
			(axis cs:#4,\pgfkeysvalueof{/pgfplots/ymax});	

		\pgfplotstablegetcolsof{\readtable}
		\pgfmathsetmacro\numberofycols{\pgfplotsretval-1}
	
		\pgfplotsinvokeforeach {1,...,\numberofycols}{
		    \addplot table [y index=##1] {\readtable}
			\closedcycle;
		    \addlegendentry{layer ##1}
		}

		\end{axis}
	\end{tikzpicture}
}

\section{Peter Piper}
\subsection{Unique Sequence}
\clipplot{peter}
\subsection{Repetetive Sequence}
\avrgplot{peter}{192}
\subsection{Exemplary Structural Development}
\strucplot{peter}{comp_1.0}{0}{192}

\section{Natural Language}
\subsection{Unique Sequence}
\clipplot{lang_nat}
\subsection{Repetitive Sequence}
\avrgplot{lang_nat}{1000}
\subsection{Exemplatory Structural Development}
\strucplot{lang_nat}{comp_0.4}{0}{1000}

\section{Numbers}
\subsection{Unique Sequence}
\clipplot{numbers}
\subsection{Repetitive Sequence}
\avrgplot{numbers}{2500}
\subsection{Exemplatory Structural Development}
\strucplot{numbers}{comp_0.8}{0}{2500}

\section{Calls}
\subsection{Unique Sequence}
\clipplot{calls}
\subsection{Repetitive Sequence}
\avrgplot{calls}{1205}
\subsection{Exemplatory Structural Development}
\strucplot{calls}{comp_0.2}{04}{1205}

\strucplot{calls}{comp_0.2}{03}{1205}

\strucplot{calls}{comp_0.2}{02}{1205}

\strucplot{calls}{comp_0.2}{01}{1205}

\end{document}
